<!DOCTYPE html>
<html>
<head>

    <meta name="viewport"
        content="width=device-width, initial-scale=1,
                 maximum-scale=1, user-scalable=0"/>

    <title>Timeline TimeGlider test</title>

    <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="bower_components/jquery-ui/jquery-ui.min.js"></script>

    <link rel="stylesheet" href="timeglider/css/jquery-ui-1.10.3.custom.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="timeglider/timeglider/Timeglider.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="timeglider/timeglider/timeglider.datepicker.css" type="text/css" charset="utf-8">

    <script src="timeglider/js/underscore-min.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/backbone-min.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/json2.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/jquery.tmpl.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/ba-tinyPubSub.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/jquery.mousewheel.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/jquery.ui.ipad.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/globalize.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/js/ba-debug.min.js" type="text/javascript" charset="utf-8"></script>

    <script src="timeglider/timeglider/TG_Date.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/TG_Org.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/TG_Timeline.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/TG_TimelineView.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/TG_Mediator.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/timeglider.timeline.widget.js" type="text/javascript" charset="utf-8"></script>
    <script src="timeglider/timeglider/timeglider.datepicker.js" type="text/javascript" charset="utf-8"></script>

    <!--<script type="text/javascript" src="http://hammerjs.github.io/dist/hammer.min.js"></script>-->

    <style>
        html, body {
          overflow-x: hidden;
        }
        body {
          position: fixed;
          top: 0;
          left: 0;
          bottom: 0;
          right: 0;
          width: 100%;
          height: 100%;
          margin: 0;
          padding: 0;
          clear: both;
        }

        #test1 {
            position: relative;
            top: 5%;
            left: 5%;
            width: 90%;
            height: 90%;
            border: 5px dashed red;
        }

        .console {
            border: 2px solid red;
            width: 100%;
            height: 100px;
            font: 12px "Lucida Console", Monaco, monospace;
            color: black;
            position: fixed;
            right: 0;
            left: 0;
            bottom: 0;
            z-index: 9999;
            background-color: rgba(255, 255, 255, 0.8);
            overflow: scroll;
        }
    </style>

    <script type="text/javascript">
        var tg;

        function setUpTest1(){
            $("#test1").show();

            var data_source = [
                {
                "id":"js_testglider",
                "title":"A little test of TimeGlider",
                "focus_date":"1991-11-30 00:00:00",
                "initial_zoom":"39",
                "image_lane_height":80,
                "events":[
                    {
                    "id":"jshist-Lambda",
                    "title": "Lambda Calculus",
                    "description":"lambda lambdaaaaa",
                    "startdate": "1991-11-30 13:12:11",
                    "enddate": "today",
                    "high_threshold":50,
                    "importance":"50",
                    "image":"http://timeglider.com/widget/_js_history/alonzo_church.jpg",
                    "link":"http://en.wikipedia.org/wiki/Lisp_(programming_language)",
                    "date_display":"day",
                    "icon":"circle_blue.png",
                    }
                ]
                }
            ];

            tg = $("#test1").timeline({
                "data_source":data_source,
                "min_zoom":31,
                "max_zoom":50,
                "icon_folder":"timeglider/timeglider/icons/",
                "show_footer":true,
				"display_zoom_level":true,
                "constrain_to_data":false,
                "timezone":"+02:00",
                "mousewheel": "zoom",
            });

            $(".timeglider-slider-container").hide();
            $(".timeglider-logo").hide();
            $(".tg-footer-buttons").hide();

            var tg_instance = tg.data("timeline");

            // MULTITOUCH CONFIGURATION
            /*
            document.body.addEventListener('touchmove', function(event) {
              event.preventDefault();
            }, false);

            var reqAnimationFrame = (function () {
                return window[Hammer.prefixed(window, 'requestAnimationFrame')] || function (callback) {
                    window.setTimeout(callback, 1000 / 60);
                };
            })();

            var mc = new Hammer.Manager($("#test1"));

            mc.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));
            mc.add(new Hammer.Pinch({ threshold: 0 })).recognizeWith(mc.get('pan'));

            mc.on("panstart panmove", onPan);
            mc.on("pinchstart pinchmove", onPinch);

            function onPan(ev) {
                tg_instance.panButton(ev.deltaX);
                console.log("panning: " + ev.deltaX);
            }

            var initScale = 1;
            function onPinch(ev) {
                tg_instance.zoom(ev.scale);
                console.log("pinching: " + ev.scale);
            }
            */
        };

        function useWindowConsole(){
            var terminal = document.getElementById('console');
            console.log = function(message) {
                try {
                    var jsonMsg = JSON.stringify(message);
                }
                catch (err){
                    jsonMsg = message;
                }

                terminal.innerHTML = terminal.innerHTML + '<br />' + jsonMsg;
                terminal.scrollTop = terminal.scrollHeight;
            };
        }

        function setUpEnv(){
            $("#console").hide();
            //useWindowConsole();

            $("#test1").hide();

            setUpTest1();
        }

    </script>
</head>
<body onload="setUpEnv()">
    <div id="test1"></div>
    <div id="console" class="console"></div>
</body>
</html>
